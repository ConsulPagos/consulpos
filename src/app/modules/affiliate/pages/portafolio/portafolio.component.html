<section id="portafolio">
    <div class="container">
        <div class="row">
            <app-title [title]="'Rones'" [subtitle]="'Portafolio'" class="col-12"></app-title>
            <div class="col-12" *ngIf="products; else loadingProducts">
                <div class="row pt-4">
                    <div class="col-lg-3 col-md-4 col-6 d-flex justify-content-center"
                        *ngFor="let product of products"
                        [routerLink]="['/afiliado/app',{ outlets: { afr: ['producto', product.id ] } }]">
                        <app-product-box [product]='product' [discount]="data['discount']"></app-product-box>
                    </div>
                </div>
                <ng-container [ngTemplateOutlet]="loadingProducts"></ng-container>
            </div>
        </div>
    </div>
</section>

<ng-template #loadingProducts>
    <div class="d-flex justify-content-center pt-4 pb-4 w-100"  [class.loading-expanded]="!products">
        <div class="align-self-center">
            <mat-spinner [diameter]="40" *ngIf="loading"></mat-spinner>
            <app-afiliado-error *ngIf="error" (reload)="load()" [errorDetails]="errorDetails"></app-afiliado-error>
        </div>
    </div>
</ng-template>
