<section id="previsualizarArchivo">
    <div class="container-fluid">
        <div class="topButtons">
            <div class="d-flex">
                <a class="nav-btn" #tooltip="matTooltip" matTooltip="Volver a conciliar"
                    [routerLink]="['/admin/app',{ outlets: { adr: ['conciliar-archivo'] } }]">
                    <li class="fa fa-arrow-left"></li>
                </a>
            </div>
        </div>
        <div class="content">
            <div class="mb-2" *ngIf="!data">
                <h3 class="mb-4">Seleccionar archivo respuesta</h3>
                <h6 class="mb-4">Archivo a actualizar #{{archivo.id}}</h6>
                <input class="file-input" type="file" title="Seleccionar archivo" style="display: inline-block;"
                    (change)="onFileChange($event)" placeholder="Upload file" accept=".xls, .xlsx">
            </div>
            <div *ngIf="data" [class.spinner]="!data">
                <div>
                    <div class="container-archivo">
                        <div>
                            <h3>Vista previa</h3>
                            <div class="resumen-container">
                                <div class="resumen-item">
                                    <div class="resumen-title">Total env√≠ado:</div>
                                    <div class="resumen-text">{{archivo.cuotas}} lineas ( {{archivo.monto | currency:"VES" }}
                                        )</div>
                                </div>
                                <div class="resumen-item">
                                    <div class="resumen-title">Total cobrado:</div>
                                    <div class="resumen-text">{{getTotal()}} lineas ( {{getTotalCobrado() | currency:"VES" }} )
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="btn-submit">
                            <app-action-btn
                                [isDisabled]="getTotal() > archivo.cuotas  || loading"
                                (onClick)="save()" [loading]="loading" [text]="'Guardar'"></app-action-btn>
                        </div>
                    </div>
                    <span class="error" *ngIf="getTotal() > archivo.cuotas">
                        El total de lineas almacenadas es menor a las cargadas.
                    </span>
                </div>
                <app-previsualizar-archivo [data]="data" [columns]="columns" [progress]="progress">
                </app-previsualizar-archivo>

            </div>
        </div>
    </div>
</section>
<ng-template #loader>
    <div *ngIf="loading"><app-loader></app-loader></div>
</ng-template>