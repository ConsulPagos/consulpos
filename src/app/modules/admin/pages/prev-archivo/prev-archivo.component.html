<section id="previsualizarArchivo">
    <div class="container-fluid">
        <div class="topButtons">
            <div class="d-flex">
                <a class="nav-btn" #tooltip="matTooltip" matTooltip="Volver a conciliar"
                    [routerLink]="['/admin/app',{ outlets: { adr: ['conciliar-archivo'] } }]">
                    <li class="fa fa-arrow-left"></li>
                </a>
            </div>
        </div>
        <div class="content">
            <div class="mb-2" *ngIf="!data">
                <h6 class="mb-4 bold uppercase">Archivo  #{{archivo.id}}</h6>
                <h6>Selecciona el archivo respuesta</h6>
                <input class="file-input" type="file" title="Seleccionar archivo" style="display: inline-block;"
                    (change)="onFileChange($event)" placeholder="Upload file" accept=".xls, .xlsx">
            </div>
            <div *ngIf="data" [class.spinner]="!data">
                <div>
                    <div class="container-archivo">
                        <div>
                            <h6 class="mb-4 bold uppercase">Archivo  #{{archivo.id}} ({{archivo.cuotas}} lineas)</h6>
                            <h6>Vista previa del archivo sleccionado:</h6>
                            <!-- <div class="resumen-container">
                                <div class="resumen-item">
                                    <div class="resumen-text">{{archivo.cuotas}} lineas </div>
                                </div>
                            </div> -->
                        </div>
                        <div class="btn-submit"
                            *ngIf="archivo && !archivo.fecha_respuesta && !archivo.fecha_conciliacion">
                            <app-action-btn [isDisabled]="getTotal() != archivo.cuotas  || loading" (onClick)="save()"
                                [loading]="loading" [text]="'Guardar'"></app-action-btn>
                        </div>
                    </div>
                    <span class="error" *ngIf="getTotal() != archivo.cuotas">
                        La cantidad de l√≠neas en el archivo no concuerda.
                    </span>
                </div>
                <app-previsualizar-archivo [data]="data" [columns]="columns">
                </app-previsualizar-archivo>

            </div>
        </div>
    </div>
</section>
<ng-template #loader>
    <div *ngIf="loading">
        <app-loader></app-loader>
    </div>
</ng-template>